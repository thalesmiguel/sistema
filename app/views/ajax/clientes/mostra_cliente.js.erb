$("#cliente-visualizar").html("<%= escape_javascript(render partial: 'form', locals: { cliente: @cliente } ) %>");
$("#cliente-adicionais").html("<%= escape_javascript(render partial: 'clientes/adicionais', locals: { cliente: @cliente }) %>");

if (<%= !@cliente.new_record? %>) {
  var cliente = '<%= @cliente.id %>'
  var informacoes = ["enderecos", "telefones", "emails", "fazendas", "cliente_bancos", "referencias", "lancar_autorizados", "racas", "empresas", "alertas"];

  $.each( informacoes, function( key, value ) {
    var url = "/clientes/" + cliente + "/" + value
    $.ajax({
      type: "GET",
      url: url,
      dataType : 'script',
      success : function(){
        switch (value) {
          case "enderecos":
            let campos = ["tipo","logradouro","numero","complemento","bairro","cep","caixa_postal","cidade_nome","estado_sigla","ativo","primario"];
            carrega_datatable_filtro("enderecos","endereco", campos, []);

            break;
          case "telefones":
            carrega_datatable("telefones","telefone", ["tipo","ddi","ddd","numero","created_at","ramal","nome_contato","importancia","telemarketing","divulgar","ativo"], []);
            // carrega_datatable_id_automatico("#telefones-table", ".telefone-form", ".excluir-telefone", [], [0,1,2,3,4,5,6,7,8,9,10]);
            break;
          case "emails":
            carrega_datatable("emails","email", ["email","contato","created_at","mala_direta","ativo","solicitacao_email","envio_contratos"], []);
            // carrega_datatable_id_automatico("#emails-table", ".email-form", ".excluir-email", [], [0,1,2,3,4,5,6]);
            break;
          case "fazendas":
            carrega_datatable("fazendas","fazenda", ["nome","cidade_nome","estado_sigla","inscricao_estadual","cnpj_produtor","cnpj_fazenda","ativo","fazenda_vendas","fazenda_compras"], []);
            // carrega_datatable_id_automatico("#fazendas-table", ".fazenda-form", ".excluir-fazenda", [], [0,1,2,3,4,5,6,7,8]);
            break;
          case "cliente_bancos":
            carrega_datatable("cliente_bancos","cliente_banco", ["banco_codigo","banco_nome","agencia","conta_corrente","cidade_nome","estado_sigla","correntista_nome","correntista_cpf_cnpj","observacao","created_at","primario","ativo"], []);
            // carrega_datatable_id_automatico("#cliente_bancos-table", ".cliente_banco-form", ".excluir-cliente_banco", [], [0,1,2,3,4,5,6,7,8,9,10,11]);
            break;
          case "referencias":
            carrega_datatable("referencias","referencia", ["nome","telefone","observacao"], []);
            // carrega_datatable_id_automatico("#referencias-table", ".referencia-form", ".excluir-referencia", [], [0,1,2]);
            break;
          case "lancar_autorizados":
            carrega_datatable("lancar_autorizados","lancar_autorizado", ["nome","cpf","tem_procuracao","observacao","ativo"], []);
            // carrega_datatable_id_automatico("#lancar_autorizados-table", ".lancar_autorizado-form", ".excluir-lancar_autorizado", [], [0,1,2,3,4]);
            break;
          case "racas":
            // carrega_datatable_id_automatico("#racas-table", ".raca-form", ".excluir-raca", [], [0,1,2,3,4,5,6,7,8,9,10]);
            break;
          case "empresas":
            carrega_datatable("empresas","empresa", ["nome","cnpj","cargo","logradouro","cidade_nome","estado_nome","cep"], []);
            // carrega_datatable_id_automatico("#empresas-table", ".empresa-form", ".excluir-empresa", [], [0,1,2,3,4,5,6]);
            break;
          case "alertas":
            carrega_datatable("alertas","alerta", ["tipo","created_at","descricao","ativo","qtde_comentarios","created_by"], [4,5]);
            // carrega_datatable_id_automatico("#alertas-table", ".alerta-form", ".excluir-alerta", [], [0,1,2,3,4,5,6]);
            break;
          default: value
        }
      }
    })

  })
};


$("#clientes-tabs .tab.disabled").removeClass("disabled").addClass("enabled").addClass("waves-effect");
$("#clientes-tabs ul").tabs('select_tab', 'cliente-visualizar');
$("#cliente-dados-adicionais").removeClass("hide");


$('ul.tabs').tabs();
$('.collapsible').collapsible();
$('select').not('.yadcf-filter').material_select();
$('textarea').trigger('autoresize');
Waves.displayEffect()

valida_formulario();
limita_text_area();

mascaras();
altera_mascara_cpf_cnpj()

Materialize.updateTextFields();
