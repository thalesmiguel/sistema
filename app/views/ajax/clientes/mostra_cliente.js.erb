$("#cliente-visualizar").html("<%= escape_javascript(render partial: 'form', locals: { cliente: @cliente } ) %>");
$("#cliente-adicionais").html("<%= escape_javascript(render partial: 'clientes/adicionais', locals: { cliente: @cliente }) %>");

if (<%= !@cliente.new_record? %>) {
  var cliente = '<%= @cliente.id %>'
  var informacoes = ["enderecos", "telefones", "emails", "fazendas", "cliente_bancos", "referencias", "lancar_autorizados", "racas", "empresas", "alertas"];

  $.each( informacoes, function( key, value ) {
    var url = "/clientes/" + cliente + "/" + value
    $.ajax({
      type: "GET",
      url: url,
      dataType : 'script',
      success : function(){
        switch (value) {
          case "enderecos":
            var campos = ["tipo","logradouro","numero","complemento","bairro","cep","caixa_postal","cidade_nome","estado_sigla","ativo","primario"];
            carrega_datatable_filtro("enderecos","endereco", campos, []);
            break;
          case "telefones":
            var campos = ["tipo","ddi","ddd","numero","created_at","ramal","nome_contato","importancia","telemarketing","divulgar","ativo"];
            carrega_datatable_filtro("telefones","telefone", campos, []);
            break;
          case "emails":
            var campos = ["email","contato","created_at","mala_direta","ativo","solicitacao_email","envio_contratos"];
            carrega_datatable_filtro("emails","email", campos, []);
            break;
          case "fazendas":
            var campos = ["nome","cidade_nome","estado_sigla","inscricao_estadual","cnpj_produtor","cnpj_fazenda","ativo","fazenda_vendas","fazenda_compras"];
            carrega_datatable_filtro("fazendas","fazenda", campos, []);
            break;
          case "cliente_bancos":
            var campos = ["banco_codigo","banco_nome","agencia","conta_corrente","cidade_nome","estado_sigla","correntista_nome","correntista_cpf_cnpj","observacao","created_at","primario","ativo"];
            carrega_datatable_filtro("cliente_bancos","cliente_banco", campos, []);
            break;
          case "referencias":
            var campos = ["nome","telefone","observacao"];
            carrega_datatable_filtro("referencias","referencia", campos, []);
            break;
          case "lancar_autorizados":
            var campos = ["nome","cpf","tem_procuracao","observacao","ativo"];
            carrega_datatable_filtro("lancar_autorizados","lancar_autorizado", campos, []);
            break;
          case "racas":
            // carrega_datatable_id_automatico("#racas-table", ".raca-form", ".excluir-raca", [], [0,1,2,3,4,5,6,7,8,9,10]);
            break;
          case "empresas":
            var campos = ["nome","cnpj","cargo","logradouro","cidade_nome","estado_nome","cep"];
            carrega_datatable_filtro("empresas","empresa", campos, []);
            break;
          case "alertas":
            var campos = ["tipo","created_at","descricao","ativo","qtde_comentarios","created_by"];
            carrega_datatable_filtro("alertas","alerta", campos, [4,5]);
            break;
          default: value
        }
      }
    })

  })
};


$("#clientes-tabs .tab.disabled").removeClass("disabled").addClass("enabled").addClass("waves-effect");
$("#clientes-tabs ul").tabs('select_tab', 'cliente-visualizar');
$("#cliente-dados-adicionais").removeClass("hide");


$('ul.tabs').tabs();
$('.collapsible').collapsible();
$('select').not('.yadcf-filter').material_select();
$('textarea').trigger('autoresize');
Waves.displayEffect()

valida_formulario();
limita_text_area();

mascaras();
altera_mascara_cpf_cnpj()

Materialize.updateTextFields();
